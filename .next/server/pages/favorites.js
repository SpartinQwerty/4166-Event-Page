"use strict";(()=>{var e={};e.id=389,e.ids=[389,660],e.modules={8061:(e,t,r)=>{r.a(e,async(e,s)=>{try{r.r(t),r.d(t,{config:()=>h,default:()=>u,getServerSideProps:()=>v,getStaticPaths:()=>x,getStaticProps:()=>m,reportWebVitals:()=>f,routeModule:()=>P,unstable_getServerProps:()=>y,unstable_getServerSideProps:()=>j,unstable_getStaticParams:()=>b,unstable_getStaticPaths:()=>S,unstable_getStaticProps:()=>g});var a=r(7093),i=r(5244),o=r(1323),n=r(2899),l=r.n(n),c=r(6814),d=r(1232),p=e([c,d]);[c,d]=p.then?(await p)():p;let u=(0,o.l)(d,"default"),m=(0,o.l)(d,"getStaticProps"),x=(0,o.l)(d,"getStaticPaths"),v=(0,o.l)(d,"getServerSideProps"),h=(0,o.l)(d,"config"),f=(0,o.l)(d,"reportWebVitals"),g=(0,o.l)(d,"unstable_getStaticProps"),S=(0,o.l)(d,"unstable_getStaticPaths"),b=(0,o.l)(d,"unstable_getStaticParams"),y=(0,o.l)(d,"unstable_getServerProps"),j=(0,o.l)(d,"unstable_getServerSideProps"),P=new a.PagesRouteModule({definition:{kind:i.x.PAGES,page:"/favorites",pathname:"/favorites",bundlePath:"",filename:""},components:{App:c.default,Document:l()},userland:d});s()}catch(e){s(e)}})},1232:(e,t,r)=>{r.a(e,async(e,s)=>{try{r.r(t),r.d(t,{default:()=>v,getServerSideProps:()=>h});var a=r(997),i=r(2210),o=r(1664),n=r.n(o),l=r(1649),c=r(6134),d=r(1163),p=r(7091),u=r(6689),m=r(4328),x=e([i,c,p,m]);function v(){let{data:e,status:t}=(0,l.useSession)();(0,d.useRouter)();let r=(0,i.useToast)(),[s,o]=(0,u.useState)([]),[m,x]=(0,u.useState)(!0),v=async e=>{try{if(!(await fetch(`/api/favorites?eventId=${e}`,{method:"DELETE"})).ok)throw Error("Failed to remove from favorites");o(s.filter(t=>t.eventId!==e)),r({title:"Removed from favorites",description:"Event has been removed from your favorites",status:"success",duration:3e3,isClosable:!0})}catch(e){console.error("Error removing from favorites:",e),r({title:"Error",description:"Failed to remove from favorites",status:"error",duration:3e3,isClosable:!0})}};return e?(0,a.jsxs)(i.Container,{maxW:"container.xl",py:8,children:[(0,a.jsxs)(i.Flex,{mb:8,justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:4,children:[(0,a.jsxs)(i.Box,{children:[(0,a.jsxs)(i.Heading,{as:"h1",size:"xl",className:"text-primary-700 relative inline-block",children:["My Favorites",a.jsx(i.Box,{className:"absolute bottom-0 left-0 w-full h-1 bg-secondary-500 transform -translate-y-1"})]}),a.jsx(i.Text,{className:"text-gray-600 mt-2",children:"Gaming events you've saved as favorites"})]}),a.jsx(n(),{href:"/events/create",passHref:!0,children:a.jsx(i.Button,{as:"a",colorScheme:"primary",size:"lg",className:"btn-primary",leftIcon:a.jsx(i.Icon,{as:c.CalendarIcon}),children:"Create New Event"})})]}),0===s.length?(0,a.jsxs)(i.Box,{textAlign:"center",py:10,className:"bg-white shadow-md rounded-lg p-8",children:[a.jsx(i.Text,{fontSize:"xl",mb:4,className:"text-primary-700",children:"No favorite events yet"}),a.jsx(i.Text,{className:"text-gray-600 mb-6",children:"Browse events and add them to your favorites to see them here."}),a.jsx(n(),{href:"/events",passHref:!0,children:a.jsx(i.Button,{as:"a",colorScheme:"primary",size:"lg",className:"btn-primary mt-4",children:"Browse Events"})})]}):a.jsx(i.SimpleGrid,{columns:{base:1,md:2,lg:3},spacing:6,children:s.map(e=>(0,a.jsxs)(i.Box,{position:"relative",children:[a.jsx(i.Button,{position:"absolute",top:2,right:2,size:"sm",variant:"solid",colorScheme:"red",onClick:()=>v(e.eventId),"aria-label":"Remove from favorites",zIndex:1,borderRadius:"full",children:a.jsx(c.StarIcon,{})}),a.jsx(p.Z,{id:e.eventId,title:e.title,description:e.description,date:e.date,address:e.location,author:`${e.hostFirstName} ${e.hostLastName}`,game:"Gaming Event"})]},e.favoriteId))})]}):null}[i,c,p,m]=x.then?(await x)():x;let h=async e=>{if(!await (0,l.getSession)(e))return{redirect:{destination:"/auth/signin",permanent:!1}};try{let e=(await (0,m.IP)()).slice(0,3);return{props:{events:JSON.parse(JSON.stringify(e))}}}catch(e){return console.error("Error fetching favorite events:",e),{props:{events:[]}}}};s()}catch(e){s(e)}})},1649:e=>{e.exports=require("next-auth/react")},2785:e=>{e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},6689:e=>{e.exports=require("react")},6405:e=>{e.exports=require("react-dom")},997:e=>{e.exports=require("react/jsx-runtime")},2048:e=>{e.exports=require("fs")},5315:e=>{e.exports=require("path")},6162:e=>{e.exports=require("stream")},1568:e=>{e.exports=require("zlib")},6134:e=>{e.exports=import("@chakra-ui/icons")},2210:e=>{e.exports=import("@chakra-ui/react")},366:e=>{e.exports=import("kysely")},8678:e=>{e.exports=import("pg")}};var t=require("../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[117,899,664,342,904],()=>r(8061));module.exports=s})();