"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/participants";
exports.ids = ["pages/api/participants"];
exports.modules = {

/***/ "@prisma/client":
/*!*********************************!*\
  !*** external "@prisma/client" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("@prisma/client");

/***/ }),

/***/ "bcryptjs":
/*!***************************!*\
  !*** external "bcryptjs" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("bcryptjs");

/***/ }),

/***/ "next-auth":
/*!****************************!*\
  !*** external "next-auth" ***!
  \****************************/
/***/ ((module) => {

module.exports = require("next-auth");

/***/ }),

/***/ "next-auth/next":
/*!*********************************!*\
  !*** external "next-auth/next" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("next-auth/next");

/***/ }),

/***/ "next-auth/providers/credentials":
/*!**************************************************!*\
  !*** external "next-auth/providers/credentials" ***!
  \**************************************************/
/***/ ((module) => {

module.exports = require("next-auth/providers/credentials");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "kysely":
/*!*************************!*\
  !*** external "kysely" ***!
  \*************************/
/***/ ((module) => {

module.exports = import("kysely");;

/***/ }),

/***/ "pg":
/*!*********************!*\
  !*** external "pg" ***!
  \*********************/
/***/ ((module) => {

module.exports = import("pg");;

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fparticipants&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cparticipants.ts&middlewareConfigBase64=e30%3D!":
/*!******************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fparticipants&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cparticipants.ts&middlewareConfigBase64=e30%3D! ***!
  \******************************************************************************************************************************************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_participants_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages\\api\\participants.ts */ \"(api)/./pages/api/participants.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_pages_api_participants_ts__WEBPACK_IMPORTED_MODULE_3__]);\n_pages_api_participants_ts__WEBPACK_IMPORTED_MODULE_3__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_participants_ts__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_participants_ts__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/participants\",\n        pathname: \"/api/participants\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _pages_api_participants_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRnBhcnRpY2lwYW50cyZwcmVmZXJyZWRSZWdpb249JmFic29sdXRlUGFnZVBhdGg9LiUyRnBhZ2VzJTVDYXBpJTVDcGFydGljaXBhbnRzLnRzJm1pZGRsZXdhcmVDb25maWdCYXNlNjQ9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNMO0FBQzFEO0FBQzBEO0FBQzFEO0FBQ0EsaUVBQWUsd0VBQUssQ0FBQyx1REFBUSxZQUFZLEVBQUM7QUFDMUM7QUFDTyxlQUFlLHdFQUFLLENBQUMsdURBQVE7QUFDcEM7QUFDTyx3QkFBd0IsZ0hBQW1CO0FBQ2xEO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLFlBQVk7QUFDWixDQUFDOztBQUVELHFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZXZlbnQtbWFuYWdlbWVudC1zeXN0ZW0vPzA5N2IiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUGFnZXNBUElSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL3BhZ2VzLWFwaS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBob2lzdCB9IGZyb20gXCJuZXh0L2Rpc3QvYnVpbGQvdGVtcGxhdGVzL2hlbHBlcnNcIjtcbi8vIEltcG9ydCB0aGUgdXNlcmxhbmQgY29kZS5cbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIuL3BhZ2VzXFxcXGFwaVxcXFxwYXJ0aWNpcGFudHMudHNcIjtcbi8vIFJlLWV4cG9ydCB0aGUgaGFuZGxlciAoc2hvdWxkIGJlIHRoZSBkZWZhdWx0IGV4cG9ydCkuXG5leHBvcnQgZGVmYXVsdCBob2lzdCh1c2VybGFuZCwgXCJkZWZhdWx0XCIpO1xuLy8gUmUtZXhwb3J0IGNvbmZpZy5cbmV4cG9ydCBjb25zdCBjb25maWcgPSBob2lzdCh1c2VybGFuZCwgXCJjb25maWdcIik7XG4vLyBDcmVhdGUgYW5kIGV4cG9ydCB0aGUgcm91dGUgbW9kdWxlIHRoYXQgd2lsbCBiZSBjb25zdW1lZC5cbmV4cG9ydCBjb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBQYWdlc0FQSVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5QQUdFU19BUEksXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9wYXJ0aWNpcGFudHNcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9wYXJ0aWNpcGFudHNcIixcbiAgICAgICAgLy8gVGhlIGZvbGxvd2luZyBhcmVuJ3QgdXNlZCBpbiBwcm9kdWN0aW9uLlxuICAgICAgICBidW5kbGVQYXRoOiBcIlwiLFxuICAgICAgICBmaWxlbmFtZTogXCJcIlxuICAgIH0sXG4gICAgdXNlcmxhbmRcbn0pO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1wYWdlcy1hcGkuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fparticipants&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cparticipants.ts&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./lib/db/db.ts":
/*!**********************!*\
  !*** ./lib/db/db.ts ***!
  \**********************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   db: () => (/* binding */ db)\n/* harmony export */ });\n/* harmony import */ var pg__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! pg */ \"pg\");\n/* harmony import */ var kysely__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! kysely */ \"kysely\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([pg__WEBPACK_IMPORTED_MODULE_0__, kysely__WEBPACK_IMPORTED_MODULE_1__]);\n([pg__WEBPACK_IMPORTED_MODULE_0__, kysely__WEBPACK_IMPORTED_MODULE_1__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\nconst dialect = new kysely__WEBPACK_IMPORTED_MODULE_1__.PostgresDialect({\n    pool: new pg__WEBPACK_IMPORTED_MODULE_0__[\"default\"].Pool({\n        database: \"ttrpg\",\n        host: \"localhost\",\n        user: \"postgres\",\n        password: \"postgres\",\n        port: 5432,\n        max: 10\n    })\n});\nconst db = new kysely__WEBPACK_IMPORTED_MODULE_1__.Kysely({\n    dialect\n});\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvZGIvZGIudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQW9CO0FBQzRCO0FBR2hELE1BQU1HLFVBQVUsSUFBSUQsbURBQWVBLENBQUM7SUFDaENFLE1BQU0sSUFBSUosK0NBQU8sQ0FBQztRQUNkTSxVQUFVO1FBQ1ZDLE1BQU07UUFDTkMsTUFBTTtRQUNOQyxVQUFVO1FBQ1ZDLE1BQU07UUFDTkMsS0FBSztJQUNUO0FBQ0o7QUFFTyxNQUFNQyxLQUFLLElBQUlYLDBDQUFNQSxDQUFXO0lBQ25DRTtBQUNKLEdBQUUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ldmVudC1tYW5hZ2VtZW50LXN5c3RlbS8uL2xpYi9kYi9kYi50cz8wN2E3Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBwZyBmcm9tICdwZyc7XHJcbmltcG9ydCB7S3lzZWx5LCBQb3N0Z3Jlc0RpYWxlY3QgfSBmcm9tICdreXNlbHknO1xyXG5pbXBvcnQgeyBEYXRhYmFzZSB9IGZyb20gJy4vdHlwZXMnO1xyXG5cclxuY29uc3QgZGlhbGVjdCA9IG5ldyBQb3N0Z3Jlc0RpYWxlY3Qoe1xyXG4gICAgcG9vbDogbmV3IHBnLlBvb2woe1xyXG4gICAgICAgIGRhdGFiYXNlOiAndHRycGcnLFxyXG4gICAgICAgIGhvc3Q6ICdsb2NhbGhvc3QnLFxyXG4gICAgICAgIHVzZXI6ICdwb3N0Z3JlcycsXHJcbiAgICAgICAgcGFzc3dvcmQ6ICdwb3N0Z3JlcycsIFxyXG4gICAgICAgIHBvcnQ6IDU0MzIsXHJcbiAgICAgICAgbWF4OiAxMFxyXG4gICAgfSlcclxufSlcclxuXHJcbmV4cG9ydCBjb25zdCBkYiA9IG5ldyBLeXNlbHk8RGF0YWJhc2U+KHtcclxuICAgIGRpYWxlY3QsXHJcbn0pIl0sIm5hbWVzIjpbInBnIiwiS3lzZWx5IiwiUG9zdGdyZXNEaWFsZWN0IiwiZGlhbGVjdCIsInBvb2wiLCJQb29sIiwiZGF0YWJhc2UiLCJob3N0IiwidXNlciIsInBhc3N3b3JkIiwicG9ydCIsIm1heCIsImRiIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./lib/db/db.ts\n");

/***/ }),

/***/ "(api)/./lib/prisma.ts":
/*!***********************!*\
  !*** ./lib/prisma.ts ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   prisma: () => (/* binding */ prisma)\n/* harmony export */ });\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_0__);\n\nconst globalForPrisma = global;\nconst prisma = globalForPrisma.prisma || new _prisma_client__WEBPACK_IMPORTED_MODULE_0__.PrismaClient();\nif (true) globalForPrisma.prisma = prisma;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvcHJpc21hLnRzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUE2QztBQUU3QyxNQUFNQyxrQkFBa0JDO0FBRWpCLE1BQU1DLFNBQVNGLGdCQUFnQkUsTUFBTSxJQUFJLElBQUlILHdEQUFZQSxHQUFFO0FBRWxFLElBQUlJLElBQXlCLEVBQWNILGdCQUFnQkUsTUFBTSxHQUFHQSIsInNvdXJjZXMiOlsid2VicGFjazovL2V2ZW50LW1hbmFnZW1lbnQtc3lzdGVtLy4vbGliL3ByaXNtYS50cz85ODIyIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFByaXNtYUNsaWVudCB9IGZyb20gJ0BwcmlzbWEvY2xpZW50J1xyXG5cclxuY29uc3QgZ2xvYmFsRm9yUHJpc21hID0gZ2xvYmFsIGFzIHVua25vd24gYXMgeyBwcmlzbWE6IFByaXNtYUNsaWVudCB9XHJcblxyXG5leHBvcnQgY29uc3QgcHJpc21hID0gZ2xvYmFsRm9yUHJpc21hLnByaXNtYSB8fCBuZXcgUHJpc21hQ2xpZW50KClcclxuXHJcbmlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSBnbG9iYWxGb3JQcmlzbWEucHJpc21hID0gcHJpc21hXHJcbiJdLCJuYW1lcyI6WyJQcmlzbWFDbGllbnQiLCJnbG9iYWxGb3JQcmlzbWEiLCJnbG9iYWwiLCJwcmlzbWEiLCJwcm9jZXNzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./lib/prisma.ts\n");

/***/ }),

/***/ "(api)/./pages/api/auth/[...nextauth].ts":
/*!*****************************************!*\
  !*** ./pages/api/auth/[...nextauth].ts ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   authOptions: () => (/* binding */ authOptions),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var next_auth_next__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next-auth/next */ \"next-auth/next\");\n/* harmony import */ var next_auth_next__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_auth_next__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_auth_providers_credentials__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next-auth/providers/credentials */ \"next-auth/providers/credentials\");\n/* harmony import */ var next_auth_providers_credentials__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(next_auth_providers_credentials__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _lib_prisma__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../lib/prisma */ \"(api)/./lib/prisma.ts\");\n/* harmony import */ var bcryptjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! bcryptjs */ \"bcryptjs\");\n/* harmony import */ var bcryptjs__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(bcryptjs__WEBPACK_IMPORTED_MODULE_3__);\n\n\n\n\nconst authOptions = {\n    session: {\n        strategy: \"jwt\",\n        maxAge: 30 * 24 * 60 * 60\n    },\n    debug: \"development\" === \"development\",\n    providers: [\n        next_auth_providers_credentials__WEBPACK_IMPORTED_MODULE_1___default()({\n            name: \"credentials\",\n            credentials: {\n                email: {\n                    label: \"Email\",\n                    type: \"email\"\n                },\n                password: {\n                    label: \"Password\",\n                    type: \"password\"\n                }\n            },\n            async authorize (credentials) {\n                if (!credentials?.email || !credentials?.password) {\n                    throw new Error(\"Invalid credentials\");\n                }\n                const user = await _lib_prisma__WEBPACK_IMPORTED_MODULE_2__.prisma.user.findUnique({\n                    where: {\n                        email: credentials.email\n                    }\n                });\n                if (!user || !user?.password) {\n                    throw new Error(\"Invalid credentials\");\n                }\n                const isCorrectPassword = await bcryptjs__WEBPACK_IMPORTED_MODULE_3___default().compare(credentials.password, user.password);\n                if (!isCorrectPassword) {\n                    throw new Error(\"Invalid credentials\");\n                }\n                return {\n                    id: user.id,\n                    email: user.email,\n                    name: user.name\n                };\n            }\n        })\n    ],\n    pages: {\n        signIn: \"/auth/signin\"\n    },\n    callbacks: {\n        async jwt ({ token, user }) {\n            if (user) {\n                token.id = user.id;\n                token.email = user.email;\n                token.name = user.name;\n            }\n            return token;\n        },\n        async session ({ session, token }) {\n            return {\n                ...session,\n                user: {\n                    ...session.user,\n                    id: token.id\n                }\n            };\n        }\n    },\n    secret: process.env.NEXTAUTH_SECRET\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (next_auth_next__WEBPACK_IMPORTED_MODULE_0___default()(authOptions));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9wYWdlcy9hcGkvYXV0aC9bLi4ubmV4dGF1dGhdLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7OztBQUNzQztBQUM0QjtBQUNyQjtBQUNmO0FBRXZCLE1BQU1JLGNBQStCO0lBQzFDQyxTQUFTO1FBQ1BDLFVBQVU7UUFDVkMsUUFBUSxLQUFLLEtBQUssS0FBSztJQUN6QjtJQUNBQyxPQUFPQyxrQkFBeUI7SUFDaENDLFdBQVc7UUFDVFQsc0VBQW1CQSxDQUFDO1lBQ2xCVSxNQUFNO1lBQ05DLGFBQWE7Z0JBQ1hDLE9BQU87b0JBQUVDLE9BQU87b0JBQVNDLE1BQU07Z0JBQVE7Z0JBQ3ZDQyxVQUFVO29CQUFFRixPQUFPO29CQUFZQyxNQUFNO2dCQUFXO1lBQ2xEO1lBQ0EsTUFBTUUsV0FBVUwsV0FBVztnQkFDekIsSUFBSSxDQUFDQSxhQUFhQyxTQUFTLENBQUNELGFBQWFJLFVBQVU7b0JBQ2pELE1BQU0sSUFBSUUsTUFBTTtnQkFDbEI7Z0JBRUEsTUFBTUMsT0FBTyxNQUFNakIsK0NBQU1BLENBQUNpQixJQUFJLENBQUNDLFVBQVUsQ0FBQztvQkFDeENDLE9BQU87d0JBQ0xSLE9BQU9ELFlBQVlDLEtBQUs7b0JBQzFCO2dCQUNGO2dCQUVBLElBQUksQ0FBQ00sUUFBUSxDQUFDQSxNQUFNSCxVQUFVO29CQUM1QixNQUFNLElBQUlFLE1BQU07Z0JBQ2xCO2dCQUVBLE1BQU1JLG9CQUFvQixNQUFNbkIsdURBQWMsQ0FDNUNTLFlBQVlJLFFBQVEsRUFDcEJHLEtBQUtILFFBQVE7Z0JBR2YsSUFBSSxDQUFDTSxtQkFBbUI7b0JBQ3RCLE1BQU0sSUFBSUosTUFBTTtnQkFDbEI7Z0JBRUEsT0FBTztvQkFDTE0sSUFBSUwsS0FBS0ssRUFBRTtvQkFDWFgsT0FBT00sS0FBS04sS0FBSztvQkFDakJGLE1BQU1RLEtBQUtSLElBQUk7Z0JBRWpCO1lBQ0Y7UUFDRjtLQUNEO0lBQ0RjLE9BQU87UUFDTEMsUUFBUTtJQUNWO0lBQ0FDLFdBQVc7UUFDVCxNQUFNQyxLQUFJLEVBQUVDLEtBQUssRUFBRVYsSUFBSSxFQUFFO1lBQ3ZCLElBQUlBLE1BQU07Z0JBQ1JVLE1BQU1MLEVBQUUsR0FBR0wsS0FBS0ssRUFBRTtnQkFDbEJLLE1BQU1oQixLQUFLLEdBQUdNLEtBQUtOLEtBQUs7Z0JBQ3hCZ0IsTUFBTWxCLElBQUksR0FBR1EsS0FBS1IsSUFBSTtZQUN4QjtZQUNBLE9BQU9rQjtRQUNUO1FBQ0EsTUFBTXhCLFNBQVEsRUFBRUEsT0FBTyxFQUFFd0IsS0FBSyxFQUFFO1lBQzlCLE9BQU87Z0JBQ0wsR0FBR3hCLE9BQU87Z0JBQ1ZjLE1BQU07b0JBQ0osR0FBR2QsUUFBUWMsSUFBSTtvQkFDZkssSUFBSUssTUFBTUwsRUFBRTtnQkFDZDtZQUNGO1FBQ0Y7SUFDRjtJQUNBTSxRQUFRckIsUUFBUXNCLEdBQUcsQ0FBQ0MsZUFBZTtBQUNyQyxFQUFFO0FBRUYsaUVBQWVoQyxxREFBUUEsQ0FBQ0ksWUFBWUEsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL2V2ZW50LW1hbmFnZW1lbnQtc3lzdGVtLy4vcGFnZXMvYXBpL2F1dGgvWy4uLm5leHRhdXRoXS50cz8yZThiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRBdXRoT3B0aW9ucyB9IGZyb20gXCJuZXh0LWF1dGhcIjtcclxuaW1wb3J0IE5leHRBdXRoIGZyb20gXCJuZXh0LWF1dGgvbmV4dFwiO1xyXG5pbXBvcnQgQ3JlZGVudGlhbHNQcm92aWRlciBmcm9tIFwibmV4dC1hdXRoL3Byb3ZpZGVycy9jcmVkZW50aWFsc1wiO1xyXG5pbXBvcnQgeyBwcmlzbWEgfSBmcm9tIFwiLi4vLi4vLi4vbGliL3ByaXNtYVwiO1xyXG5pbXBvcnQgYmNyeXB0IGZyb20gXCJiY3J5cHRqc1wiO1xyXG5cclxuZXhwb3J0IGNvbnN0IGF1dGhPcHRpb25zOiBOZXh0QXV0aE9wdGlvbnMgPSB7XHJcbiAgc2Vzc2lvbjoge1xyXG4gICAgc3RyYXRlZ3k6IFwiand0XCIsXHJcbiAgICBtYXhBZ2U6IDMwICogMjQgKiA2MCAqIDYwLCAvLyAzMCBkYXlzXHJcbiAgfSxcclxuICBkZWJ1ZzogcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdkZXZlbG9wbWVudCcsXHJcbiAgcHJvdmlkZXJzOiBbXHJcbiAgICBDcmVkZW50aWFsc1Byb3ZpZGVyKHtcclxuICAgICAgbmFtZTogXCJjcmVkZW50aWFsc1wiLFxyXG4gICAgICBjcmVkZW50aWFsczoge1xyXG4gICAgICAgIGVtYWlsOiB7IGxhYmVsOiBcIkVtYWlsXCIsIHR5cGU6IFwiZW1haWxcIiB9LFxyXG4gICAgICAgIHBhc3N3b3JkOiB7IGxhYmVsOiBcIlBhc3N3b3JkXCIsIHR5cGU6IFwicGFzc3dvcmRcIiB9XHJcbiAgICAgIH0sXHJcbiAgICAgIGFzeW5jIGF1dGhvcml6ZShjcmVkZW50aWFscykge1xyXG4gICAgICAgIGlmICghY3JlZGVudGlhbHM/LmVtYWlsIHx8ICFjcmVkZW50aWFscz8ucGFzc3dvcmQpIHtcclxuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgY3JlZGVudGlhbHNcIik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCB1c2VyID0gYXdhaXQgcHJpc21hLnVzZXIuZmluZFVuaXF1ZSh7XHJcbiAgICAgICAgICB3aGVyZToge1xyXG4gICAgICAgICAgICBlbWFpbDogY3JlZGVudGlhbHMuZW1haWwsXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpZiAoIXVzZXIgfHwgIXVzZXI/LnBhc3N3b3JkKSB7XHJcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIGNyZWRlbnRpYWxzXCIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgaXNDb3JyZWN0UGFzc3dvcmQgPSBhd2FpdCBiY3J5cHQuY29tcGFyZShcclxuICAgICAgICAgIGNyZWRlbnRpYWxzLnBhc3N3b3JkLFxyXG4gICAgICAgICAgdXNlci5wYXNzd29yZFxyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIGlmICghaXNDb3JyZWN0UGFzc3dvcmQpIHtcclxuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgY3JlZGVudGlhbHNcIik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgaWQ6IHVzZXIuaWQsXHJcbiAgICAgICAgICBlbWFpbDogdXNlci5lbWFpbCxcclxuICAgICAgICAgIG5hbWU6IHVzZXIubmFtZSxcclxuICAgICAgICAgIC8vIFJlbW92aW5nIGlzQWRtaW4gYXMgaXQncyBub3QgaW4gdGhlIHVzZXIgdHlwZVxyXG4gICAgICAgIH07XHJcbiAgICAgIH0sXHJcbiAgICB9KSxcclxuICBdLFxyXG4gIHBhZ2VzOiB7XHJcbiAgICBzaWduSW46IFwiL2F1dGgvc2lnbmluXCIsXHJcbiAgfSxcclxuICBjYWxsYmFja3M6IHtcclxuICAgIGFzeW5jIGp3dCh7IHRva2VuLCB1c2VyIH0pIHtcclxuICAgICAgaWYgKHVzZXIpIHtcclxuICAgICAgICB0b2tlbi5pZCA9IHVzZXIuaWQ7XHJcbiAgICAgICAgdG9rZW4uZW1haWwgPSB1c2VyLmVtYWlsO1xyXG4gICAgICAgIHRva2VuLm5hbWUgPSB1c2VyLm5hbWU7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIHRva2VuO1xyXG4gICAgfSxcclxuICAgIGFzeW5jIHNlc3Npb24oeyBzZXNzaW9uLCB0b2tlbiB9KSB7XHJcbiAgICAgIHJldHVybiB7XHJcbiAgICAgICAgLi4uc2Vzc2lvbixcclxuICAgICAgICB1c2VyOiB7XHJcbiAgICAgICAgICAuLi5zZXNzaW9uLnVzZXIsXHJcbiAgICAgICAgICBpZDogdG9rZW4uaWQsXHJcbiAgICAgICAgfSxcclxuICAgICAgfTtcclxuICAgIH0sXHJcbiAgfSxcclxuICBzZWNyZXQ6IHByb2Nlc3MuZW52Lk5FWFRBVVRIX1NFQ1JFVCxcclxufTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IE5leHRBdXRoKGF1dGhPcHRpb25zKTtcclxuIl0sIm5hbWVzIjpbIk5leHRBdXRoIiwiQ3JlZGVudGlhbHNQcm92aWRlciIsInByaXNtYSIsImJjcnlwdCIsImF1dGhPcHRpb25zIiwic2Vzc2lvbiIsInN0cmF0ZWd5IiwibWF4QWdlIiwiZGVidWciLCJwcm9jZXNzIiwicHJvdmlkZXJzIiwibmFtZSIsImNyZWRlbnRpYWxzIiwiZW1haWwiLCJsYWJlbCIsInR5cGUiLCJwYXNzd29yZCIsImF1dGhvcml6ZSIsIkVycm9yIiwidXNlciIsImZpbmRVbmlxdWUiLCJ3aGVyZSIsImlzQ29ycmVjdFBhc3N3b3JkIiwiY29tcGFyZSIsImlkIiwicGFnZXMiLCJzaWduSW4iLCJjYWxsYmFja3MiLCJqd3QiLCJ0b2tlbiIsInNlY3JldCIsImVudiIsIk5FWFRBVVRIX1NFQ1JFVCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./pages/api/auth/[...nextauth].ts\n");

/***/ }),

/***/ "(api)/./pages/api/participants.ts":
/*!***********************************!*\
  !*** ./pages/api/participants.ts ***!
  \***********************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var _lib_db_db__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../lib/db/db */ \"(api)/./lib/db/db.ts\");\n/* harmony import */ var next_auth__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next-auth */ \"next-auth\");\n/* harmony import */ var next_auth__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(next_auth__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _auth_nextauth___WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./auth/[...nextauth] */ \"(api)/./pages/api/auth/[...nextauth].ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_lib_db_db__WEBPACK_IMPORTED_MODULE_0__]);\n_lib_db_db__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n// API handler for event participants\nasync function handler(req, res) {\n    try {\n        // GET - Get participants for an event\n        if (req.method === \"GET\") {\n            return handleGetParticipants(req, res);\n        }\n        // For methods requiring authentication, get the session\n        const session = await (0,next_auth__WEBPACK_IMPORTED_MODULE_1__.getServerSession)(req, res, _auth_nextauth___WEBPACK_IMPORTED_MODULE_2__.authOptions);\n        // Require authentication for POST and DELETE\n        if (!session) {\n            return res.status(401).json({\n                message: \"Unauthorized\"\n            });\n        }\n        // POST - Join an event\n        if (req.method === \"POST\") {\n            return handleJoinEvent(req, res, session);\n        }\n        // DELETE - Leave an event\n        if (req.method === \"DELETE\") {\n            return handleLeaveEvent(req, res, session);\n        }\n        // Method not allowed\n        return res.status(405).json({\n            message: \"Method not allowed\"\n        });\n    } catch (error) {\n        console.error(\"Error in participants API:\", error);\n        return res.status(500).json({\n            message: \"Server error\"\n        });\n    }\n}\n// Get participants for an event\nasync function handleGetParticipants(req, res) {\n    try {\n        const { eventId } = req.query;\n        if (!eventId || Array.isArray(eventId)) {\n            return res.status(400).json({\n                message: \"Invalid event ID\"\n            });\n        }\n        // Get participants with account details\n        const participants = await _lib_db_db__WEBPACK_IMPORTED_MODULE_0__.db.selectFrom(\"participants as p\").innerJoin(\"accounts as a\", \"a.id\", \"p.userId\").select([\n            \"p.id as participantId\",\n            \"p.eventId\",\n            \"p.userId\",\n            \"p.joinedAt\",\n            \"a.username\",\n            \"a.firstName\",\n            \"a.lastName\"\n        ]).where(\"p.eventId\", \"=\", Number(eventId)).execute();\n        return res.status(200).json(participants);\n    } catch (error) {\n        console.error(\"Error getting participants:\", error);\n        return res.status(500).json({\n            message: \"Error getting participants\"\n        });\n    }\n}\n// Join an event\nasync function handleJoinEvent(req, res, session) {\n    try {\n        const { eventId } = req.body;\n        const userEmail = session?.user?.email;\n        if (!eventId || !userEmail) {\n            return res.status(400).json({\n                message: \"Missing event ID or user email\"\n            });\n        }\n        // Get the user's account ID\n        console.log(\"Looking for account with email/username:\", userEmail);\n        const accounts = await _lib_db_db__WEBPACK_IMPORTED_MODULE_0__.db.selectFrom(\"accounts\").select([\n            \"id\",\n            \"username\"\n        ]).execute();\n        console.log(\"All accounts:\", accounts);\n        // Find the account with the matching username\n        const userAccount = accounts.find((account)=>account.username === userEmail);\n        if (!userAccount) {\n            // If not found, we'll try to create a new account\n            console.log(\"Account not found for email:\", userEmail);\n            // Get user details from session\n            const userName = session.user?.name || \"User\";\n            // Create a new account for the user\n            console.log(\"Creating new account for user:\", userName, userEmail);\n            const newAccount = await _lib_db_db__WEBPACK_IMPORTED_MODULE_0__.db.insertInto(\"accounts\").values({\n                username: userEmail,\n                password: \"temppassword\",\n                firstName: userName?.split(\" \")[0] || \"User\",\n                lastName: userName?.split(\" \")[1] || \"User\"\n            }).returning([\n                \"id\",\n                \"username\"\n            ]).executeTakeFirst();\n            console.log(\"Created new account:\", newAccount);\n            if (!newAccount) {\n                return res.status(500).json({\n                    message: \"Failed to create user account\"\n                });\n            }\n            var userId = newAccount.id;\n        } else {\n            var userId = userAccount.id;\n        }\n        // Check if the user is already a participant\n        const existingParticipant = await _lib_db_db__WEBPACK_IMPORTED_MODULE_0__.db.selectFrom(\"participants as p\").select([\n            \"p.id\"\n        ]).where(\"p.eventId\", \"=\", Number(eventId)).where(\"p.userId\", \"=\", userId).execute();\n        if (existingParticipant.length > 0) {\n            return res.status(409).json({\n                message: \"Already joined this event\"\n            });\n        }\n        // Add the user as a participant\n        try {\n            console.log(\"Inserting participant with eventId:\", Number(eventId), \"userId:\", userId);\n            const participant = await _lib_db_db__WEBPACK_IMPORTED_MODULE_0__.db.insertInto(\"participants\").values({\n                eventId: Number(eventId),\n                userId: Number(userId),\n                joinedAt: new Date() // Explicitly include joinedAt to satisfy TypeScript\n            }).returning([\n                \"id\",\n                \"eventId\",\n                \"userId\",\n                \"joinedAt\"\n            ]).executeTakeFirst();\n            console.log(\"Participant added successfully:\", participant);\n            return res.status(201).json(participant);\n        } catch (insertError) {\n            console.error(\"Error inserting participant:\", insertError);\n            console.error(\"Error stack:\", insertError.stack);\n            return res.status(500).json({\n                message: \"Error inserting participant\",\n                error: insertError.message || \"Unknown error\"\n            });\n        }\n    } catch (error) {\n        console.error(\"Error joining event:\", error);\n        console.error(\"Error stack:\", error.stack);\n        return res.status(500).json({\n            message: \"Error joining event\",\n            error: error.message || \"Unknown error\"\n        });\n    }\n}\n// Leave an event\nasync function handleLeaveEvent(req, res, session) {\n    try {\n        const { eventId } = req.query;\n        const userEmail = session?.user?.email;\n        if (!eventId || Array.isArray(eventId) || !userEmail) {\n            return res.status(400).json({\n                message: \"Invalid event ID or missing user email\"\n            });\n        }\n        // Get the user's account ID\n        const accounts = await _lib_db_db__WEBPACK_IMPORTED_MODULE_0__.db.selectFrom(\"accounts\").select([\n            \"id\",\n            \"username\"\n        ]).execute();\n        // Find the account with the matching username\n        const userAccount = accounts.find((account)=>account.username === userEmail);\n        if (!userAccount) {\n            return res.status(404).json({\n                message: \"Account not found\"\n            });\n        }\n        const userId = userAccount.id;\n        // Delete the participant record\n        const result = await _lib_db_db__WEBPACK_IMPORTED_MODULE_0__.db.deleteFrom(\"participants as p\").where(\"p.eventId\", \"=\", Number(eventId)).where(\"p.userId\", \"=\", userId).executeTakeFirst();\n        return res.status(200).json({\n            message: \"Left event successfully\"\n        });\n    } catch (error) {\n        console.error(\"Error leaving event:\", error);\n        return res.status(500).json({\n            message: \"Error leaving event\"\n        });\n    }\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QVNxQixNQUFNQztRQUVqQyxJQUFJLENBQUNkLFdBQVdFLE1BQU1DLE9BQU8sQ0FBQ0gsWUFBWSxDQUFDWSxXQUFXO1lBQ3BELE9BQU92QixJQUFJSSxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO2dCQUFFQyxTQUFTO1lBQXlDO1FBQ2xGO1FBRUEsNEJBQTRCO1FBQzVCLE1BQU1xQixXQUFXLE1BQU1oQywwQ0FBRUEsQ0FDdEJxQixVQUFVLENBQUMsWUFDWEUsTUFBTSxDQUFDO1lBQUM7WUFBTTtTQUFXLEVBQ3pCRyxPQUFPO1FBRVYsOENBQThDO1FBQzlDLE1BQU1PLGNBQWNELFNBQVNFLElBQUksQ0FBQ0MsQ0FBQUEsVUFBV0EsUUFBUUMsUUFBUSxLQUFLUjtRQUVsRSxJQUFJLENBQUNLLGFBQWE7WUFDaEIsT0FBTzVCLElBQUlJLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7Z0JBQUVDLFNBQVM7WUFBb0I7UUFDN0Q7UUFFQSxNQUFNcUMsU0FBU2YsWUFBWWdCLEVBQUU7UUFFN0IsZ0NBQWdDO1FBQ2hDLE1BQU1RLFNBQVMsTUFBTXpELDBDQUFFQSxDQUNwQjBELFVBQVUsQ0FBQyxxQkFDWGxDLEtBQUssQ0FBQyxhQUFhLEtBQUtDLE9BQU9ULFVBQy9CUSxLQUFLLENBQUMsWUFBWSxLQUFLd0IsUUFDdkJELGdCQUFnQjtRQUVuQixPQUFPMUMsSUFBSUksTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztZQUFFQyxTQUFTO1FBQTBCO0lBQ25FLEVBQUUsT0FBT0csT0FBTztRQUNkQyxRQUFRRCxLQUFLLENBQUMsd0JBQXdCQTtRQUN0QyxPQUFPVCxJQUFJSSxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO1lBQUVDLFNBQVM7UUFBc0I7SUFDL0Q7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2V2ZW50LW1hbmFnZW1lbnQtc3lzdGVtLy4vcGFnZXMvYXBpL3BhcnRpY2lwYW50cy50cz82M2JhIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRBcGlSZXF1ZXN0LCBOZXh0QXBpUmVzcG9uc2UgfSBmcm9tICduZXh0JztcbmltcG9ydCB7IGRiIH0gZnJvbSAnLi4vLi4vbGliL2RiL2RiJztcbmltcG9ydCB7IGdldFNlcnZlclNlc3Npb24gfSBmcm9tICduZXh0LWF1dGgnO1xuaW1wb3J0IHsgYXV0aE9wdGlvbnMgfSBmcm9tICcuL2F1dGgvWy4uLm5leHRhdXRoXSc7XG5cbi8vIEFQSSBoYW5kbGVyIGZvciBldmVudCBwYXJ0aWNpcGFudHNcbmV4cG9ydCBkZWZhdWx0IGFzeW5jIGZ1bmN0aW9uIGhhbmRsZXIocmVxOiBOZXh0QXBpUmVxdWVzdCwgcmVzOiBOZXh0QXBpUmVzcG9uc2UpIHtcbiAgdHJ5IHtcbiAgICAvLyBHRVQgLSBHZXQgcGFydGljaXBhbnRzIGZvciBhbiBldmVudFxuICAgIGlmIChyZXEubWV0aG9kID09PSAnR0VUJykge1xuICAgICAgcmV0dXJuIGhhbmRsZUdldFBhcnRpY2lwYW50cyhyZXEsIHJlcyk7XG4gICAgfVxuICAgIFxuICAgIC8vIEZvciBtZXRob2RzIHJlcXVpcmluZyBhdXRoZW50aWNhdGlvbiwgZ2V0IHRoZSBzZXNzaW9uXG4gICAgY29uc3Qgc2Vzc2lvbiA9IGF3YWl0IGdldFNlcnZlclNlc3Npb24ocmVxLCByZXMsIGF1dGhPcHRpb25zKTtcbiAgICBcbiAgICAvLyBSZXF1aXJlIGF1dGhlbnRpY2F0aW9uIGZvciBQT1NUIGFuZCBERUxFVEVcbiAgICBpZiAoIXNlc3Npb24pIHtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMSkuanNvbih7IG1lc3NhZ2U6ICdVbmF1dGhvcml6ZWQnIH0pO1xuICAgIH1cbiAgICBcbiAgICAvLyBQT1NUIC0gSm9pbiBhbiBldmVudFxuICAgIGlmIChyZXEubWV0aG9kID09PSAnUE9TVCcpIHtcbiAgICAgIHJldHVybiBoYW5kbGVKb2luRXZlbnQocmVxLCByZXMsIHNlc3Npb24pO1xuICAgIH1cbiAgICBcbiAgICAvLyBERUxFVEUgLSBMZWF2ZSBhbiBldmVudFxuICAgIGlmIChyZXEubWV0aG9kID09PSAnREVMRVRFJykge1xuICAgICAgcmV0dXJuIGhhbmRsZUxlYXZlRXZlbnQocmVxLCByZXMsIHNlc3Npb24pO1xuICAgIH1cbiAgICBcbiAgICAvLyBNZXRob2Qgbm90IGFsbG93ZWRcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDUpLmpzb24oeyBtZXNzYWdlOiAnTWV0aG9kIG5vdCBhbGxvd2VkJyB9KTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBpbiBwYXJ0aWNpcGFudHMgQVBJOicsIGVycm9yKTtcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLmpzb24oeyBtZXNzYWdlOiAnU2VydmVyIGVycm9yJyB9KTtcbiAgfVxufVxuXG4vLyBHZXQgcGFydGljaXBhbnRzIGZvciBhbiBldmVudFxuYXN5bmMgZnVuY3Rpb24gaGFuZGxlR2V0UGFydGljaXBhbnRzKHJlcTogTmV4dEFwaVJlcXVlc3QsIHJlczogTmV4dEFwaVJlc3BvbnNlKSB7XG4gIHRyeSB7XG4gICAgY29uc3QgeyBldmVudElkIH0gPSByZXEucXVlcnk7XG4gICAgXG4gICAgaWYgKCFldmVudElkIHx8IEFycmF5LmlzQXJyYXkoZXZlbnRJZCkpIHtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IG1lc3NhZ2U6ICdJbnZhbGlkIGV2ZW50IElEJyB9KTtcbiAgICB9XG4gICAgXG4gICAgLy8gR2V0IHBhcnRpY2lwYW50cyB3aXRoIGFjY291bnQgZGV0YWlsc1xuICAgIGNvbnN0IHBhcnRpY2lwYW50cyA9IGF3YWl0IGRiXG4gICAgICAuc2VsZWN0RnJvbSgncGFydGljaXBhbnRzIGFzIHAnKVxuICAgICAgLmlubmVySm9pbignYWNjb3VudHMgYXMgYScsICdhLmlkJywgJ3AudXNlcklkJylcbiAgICAgIC5zZWxlY3QoW1xuICAgICAgICAncC5pZCBhcyBwYXJ0aWNpcGFudElkJyxcbiAgICAgICAgJ3AuZXZlbnRJZCcsXG4gICAgICAgICdwLnVzZXJJZCcsXG4gICAgICAgICdwLmpvaW5lZEF0JyxcbiAgICAgICAgJ2EudXNlcm5hbWUnLFxuICAgICAgICAnYS5maXJzdE5hbWUnLFxuICAgICAgICAnYS5sYXN0TmFtZSdcbiAgICAgIF0pXG4gICAgICAud2hlcmUoJ3AuZXZlbnRJZCcsICc9JywgTnVtYmVyKGV2ZW50SWQpKVxuICAgICAgLmV4ZWN1dGUoKTtcbiAgICBcbiAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24ocGFydGljaXBhbnRzKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBnZXR0aW5nIHBhcnRpY2lwYW50czonLCBlcnJvcik7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgbWVzc2FnZTogJ0Vycm9yIGdldHRpbmcgcGFydGljaXBhbnRzJyB9KTtcbiAgfVxufVxuXG4vLyBKb2luIGFuIGV2ZW50XG5hc3luYyBmdW5jdGlvbiBoYW5kbGVKb2luRXZlbnQocmVxOiBOZXh0QXBpUmVxdWVzdCwgcmVzOiBOZXh0QXBpUmVzcG9uc2UsIHNlc3Npb246IGFueSkge1xuICB0cnkge1xuICAgIGNvbnN0IHsgZXZlbnRJZCB9ID0gcmVxLmJvZHk7XG4gICAgY29uc3QgdXNlckVtYWlsID0gc2Vzc2lvbj8udXNlcj8uZW1haWw7XG4gICAgXG4gICAgaWYgKCFldmVudElkIHx8ICF1c2VyRW1haWwpIHtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IG1lc3NhZ2U6ICdNaXNzaW5nIGV2ZW50IElEIG9yIHVzZXIgZW1haWwnIH0pO1xuICAgIH1cbiAgICBcbiAgICAvLyBHZXQgdGhlIHVzZXIncyBhY2NvdW50IElEXG4gICAgY29uc29sZS5sb2coJ0xvb2tpbmcgZm9yIGFjY291bnQgd2l0aCBlbWFpbC91c2VybmFtZTonLCB1c2VyRW1haWwpO1xuICAgIFxuICAgIGNvbnN0IGFjY291bnRzID0gYXdhaXQgZGJcbiAgICAgIC5zZWxlY3RGcm9tKCdhY2NvdW50cycpXG4gICAgICAuc2VsZWN0KFsnaWQnLCAndXNlcm5hbWUnXSlcbiAgICAgIC5leGVjdXRlKCk7XG4gICAgXG4gICAgY29uc29sZS5sb2coJ0FsbCBhY2NvdW50czonLCBhY2NvdW50cyk7XG4gICAgXG4gICAgLy8gRmluZCB0aGUgYWNjb3VudCB3aXRoIHRoZSBtYXRjaGluZyB1c2VybmFtZVxuICAgIGNvbnN0IHVzZXJBY2NvdW50ID0gYWNjb3VudHMuZmluZChhY2NvdW50ID0+IGFjY291bnQudXNlcm5hbWUgPT09IHVzZXJFbWFpbCk7XG4gICAgXG4gICAgaWYgKCF1c2VyQWNjb3VudCkge1xuICAgICAgLy8gSWYgbm90IGZvdW5kLCB3ZSdsbCB0cnkgdG8gY3JlYXRlIGEgbmV3IGFjY291bnRcbiAgICAgIGNvbnNvbGUubG9nKCdBY2NvdW50IG5vdCBmb3VuZCBmb3IgZW1haWw6JywgdXNlckVtYWlsKTtcbiAgICAgIFxuICAgICAgLy8gR2V0IHVzZXIgZGV0YWlscyBmcm9tIHNlc3Npb25cbiAgICAgIGNvbnN0IHVzZXJOYW1lID0gc2Vzc2lvbi51c2VyPy5uYW1lIHx8ICdVc2VyJztcbiAgICAgIFxuICAgICAgLy8gQ3JlYXRlIGEgbmV3IGFjY291bnQgZm9yIHRoZSB1c2VyXG4gICAgICBjb25zb2xlLmxvZygnQ3JlYXRpbmcgbmV3IGFjY291bnQgZm9yIHVzZXI6JywgdXNlck5hbWUsIHVzZXJFbWFpbCk7XG4gICAgICBcbiAgICAgIGNvbnN0IG5ld0FjY291bnQgPSBhd2FpdCBkYlxuICAgICAgICAuaW5zZXJ0SW50bygnYWNjb3VudHMnKVxuICAgICAgICAudmFsdWVzKHtcbiAgICAgICAgICB1c2VybmFtZTogdXNlckVtYWlsLFxuICAgICAgICAgIHBhc3N3b3JkOiAndGVtcHBhc3N3b3JkJywgLy8gVGhpcyBzaG91bGQgYmUgcHJvcGVybHkgaGFuZGxlZCBpbiBhIHJlYWwgYXBwXG4gICAgICAgICAgZmlyc3ROYW1lOiB1c2VyTmFtZT8uc3BsaXQoJyAnKVswXSB8fCAnVXNlcicsXG4gICAgICAgICAgbGFzdE5hbWU6IHVzZXJOYW1lPy5zcGxpdCgnICcpWzFdIHx8ICdVc2VyJ1xuICAgICAgICB9KVxuICAgICAgICAucmV0dXJuaW5nKFsnaWQnLCAndXNlcm5hbWUnXSlcbiAgICAgICAgLmV4ZWN1dGVUYWtlRmlyc3QoKTtcbiAgICAgIFxuICAgICAgY29uc29sZS5sb2coJ0NyZWF0ZWQgbmV3IGFjY291bnQ6JywgbmV3QWNjb3VudCk7XG4gICAgICBcbiAgICAgIGlmICghbmV3QWNjb3VudCkge1xuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLmpzb24oeyBtZXNzYWdlOiAnRmFpbGVkIHRvIGNyZWF0ZSB1c2VyIGFjY291bnQnIH0pO1xuICAgICAgfVxuICAgICAgXG4gICAgICB2YXIgdXNlcklkID0gbmV3QWNjb3VudC5pZDtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIHVzZXJJZCA9IHVzZXJBY2NvdW50LmlkO1xuICAgIH1cbiAgICBcbiAgICAvLyBDaGVjayBpZiB0aGUgdXNlciBpcyBhbHJlYWR5IGEgcGFydGljaXBhbnRcbiAgICBjb25zdCBleGlzdGluZ1BhcnRpY2lwYW50ID0gYXdhaXQgZGJcbiAgICAgIC5zZWxlY3RGcm9tKCdwYXJ0aWNpcGFudHMgYXMgcCcpXG4gICAgICAuc2VsZWN0KFsncC5pZCddKVxuICAgICAgLndoZXJlKCdwLmV2ZW50SWQnLCAnPScsIE51bWJlcihldmVudElkKSlcbiAgICAgIC53aGVyZSgncC51c2VySWQnLCAnPScsIHVzZXJJZClcbiAgICAgIC5leGVjdXRlKCk7XG4gICAgXG4gICAgaWYgKGV4aXN0aW5nUGFydGljaXBhbnQubGVuZ3RoID4gMCkge1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA5KS5qc29uKHsgbWVzc2FnZTogJ0FscmVhZHkgam9pbmVkIHRoaXMgZXZlbnQnIH0pO1xuICAgIH1cbiAgICBcbiAgICAvLyBBZGQgdGhlIHVzZXIgYXMgYSBwYXJ0aWNpcGFudFxuICAgIHRyeSB7XG4gICAgICBjb25zb2xlLmxvZygnSW5zZXJ0aW5nIHBhcnRpY2lwYW50IHdpdGggZXZlbnRJZDonLCBOdW1iZXIoZXZlbnRJZCksICd1c2VySWQ6JywgdXNlcklkKTtcbiAgICAgIFxuICAgICAgY29uc3QgcGFydGljaXBhbnQgPSBhd2FpdCBkYlxuICAgICAgICAuaW5zZXJ0SW50bygncGFydGljaXBhbnRzJylcbiAgICAgICAgLnZhbHVlcyh7XG4gICAgICAgICAgZXZlbnRJZDogTnVtYmVyKGV2ZW50SWQpLFxuICAgICAgICAgIHVzZXJJZDogTnVtYmVyKHVzZXJJZCksIC8vIEVuc3VyZSB1c2VySWQgaXMgYSBudW1iZXJcbiAgICAgICAgICBqb2luZWRBdDogbmV3IERhdGUoKSAvLyBFeHBsaWNpdGx5IGluY2x1ZGUgam9pbmVkQXQgdG8gc2F0aXNmeSBUeXBlU2NyaXB0XG4gICAgICAgIH0pXG4gICAgICAgIC5yZXR1cm5pbmcoWydpZCcsICdldmVudElkJywgJ3VzZXJJZCcsICdqb2luZWRBdCddKVxuICAgICAgICAuZXhlY3V0ZVRha2VGaXJzdCgpO1xuICAgICAgXG4gICAgICBjb25zb2xlLmxvZygnUGFydGljaXBhbnQgYWRkZWQgc3VjY2Vzc2Z1bGx5OicsIHBhcnRpY2lwYW50KTtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDIwMSkuanNvbihwYXJ0aWNpcGFudCk7XG4gICAgfSBjYXRjaCAoaW5zZXJ0RXJyb3I6IGFueSkge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgaW5zZXJ0aW5nIHBhcnRpY2lwYW50OicsIGluc2VydEVycm9yKTtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHN0YWNrOicsIGluc2VydEVycm9yLnN0YWNrKTtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7IFxuICAgICAgICBtZXNzYWdlOiAnRXJyb3IgaW5zZXJ0aW5nIHBhcnRpY2lwYW50JywgXG4gICAgICAgIGVycm9yOiBpbnNlcnRFcnJvci5tZXNzYWdlIHx8ICdVbmtub3duIGVycm9yJyBcbiAgICAgIH0pO1xuICAgIH1cbiAgICBcbiAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGpvaW5pbmcgZXZlbnQ6JywgZXJyb3IpO1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHN0YWNrOicsIGVycm9yLnN0YWNrKTtcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLmpzb24oeyBcbiAgICAgIG1lc3NhZ2U6ICdFcnJvciBqb2luaW5nIGV2ZW50JywgXG4gICAgICBlcnJvcjogZXJyb3IubWVzc2FnZSB8fCAnVW5rbm93biBlcnJvcicgXG4gICAgfSk7XG4gIH1cbn1cblxuLy8gTGVhdmUgYW4gZXZlbnRcbmFzeW5jIGZ1bmN0aW9uIGhhbmRsZUxlYXZlRXZlbnQocmVxOiBOZXh0QXBpUmVxdWVzdCwgcmVzOiBOZXh0QXBpUmVzcG9uc2UsIHNlc3Npb246IGFueSkge1xuICB0cnkge1xuICAgIGNvbnN0IHsgZXZlbnRJZCB9ID0gcmVxLnF1ZXJ5O1xuICAgIGNvbnN0IHVzZXJFbWFpbCA9IHNlc3Npb24/LnVzZXI/LmVtYWlsO1xuICAgIFxuICAgIGlmICghZXZlbnRJZCB8fCBBcnJheS5pc0FycmF5KGV2ZW50SWQpIHx8ICF1c2VyRW1haWwpIHtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IG1lc3NhZ2U6ICdJbnZhbGlkIGV2ZW50IElEIG9yIG1pc3NpbmcgdXNlciBlbWFpbCcgfSk7XG4gICAgfVxuICAgIFxuICAgIC8vIEdldCB0aGUgdXNlcidzIGFjY291bnQgSURcbiAgICBjb25zdCBhY2NvdW50cyA9IGF3YWl0IGRiXG4gICAgICAuc2VsZWN0RnJvbSgnYWNjb3VudHMnKVxuICAgICAgLnNlbGVjdChbJ2lkJywgJ3VzZXJuYW1lJ10pXG4gICAgICAuZXhlY3V0ZSgpO1xuICAgIFxuICAgIC8vIEZpbmQgdGhlIGFjY291bnQgd2l0aCB0aGUgbWF0Y2hpbmcgdXNlcm5hbWVcbiAgICBjb25zdCB1c2VyQWNjb3VudCA9IGFjY291bnRzLmZpbmQoYWNjb3VudCA9PiBhY2NvdW50LnVzZXJuYW1lID09PSB1c2VyRW1haWwpO1xuICAgIFxuICAgIGlmICghdXNlckFjY291bnQpIHtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7IG1lc3NhZ2U6ICdBY2NvdW50IG5vdCBmb3VuZCcgfSk7XG4gICAgfVxuICAgIFxuICAgIGNvbnN0IHVzZXJJZCA9IHVzZXJBY2NvdW50LmlkO1xuICAgIFxuICAgIC8vIERlbGV0ZSB0aGUgcGFydGljaXBhbnQgcmVjb3JkXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZGJcbiAgICAgIC5kZWxldGVGcm9tKCdwYXJ0aWNpcGFudHMgYXMgcCcpXG4gICAgICAud2hlcmUoJ3AuZXZlbnRJZCcsICc9JywgTnVtYmVyKGV2ZW50SWQpKVxuICAgICAgLndoZXJlKCdwLnVzZXJJZCcsICc9JywgdXNlcklkKVxuICAgICAgLmV4ZWN1dGVUYWtlRmlyc3QoKTtcbiAgICBcbiAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24oeyBtZXNzYWdlOiAnTGVmdCBldmVudCBzdWNjZXNzZnVsbHknIH0pO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGxlYXZpbmcgZXZlbnQ6JywgZXJyb3IpO1xuICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7IG1lc3NhZ2U6ICdFcnJvciBsZWF2aW5nIGV2ZW50JyB9KTtcbiAgfVxufVxuIl0sIm5hbWVzIjpbImRiIiwiZ2V0U2VydmVyU2Vzc2lvbiIsImF1dGhPcHRpb25zIiwiaGFuZGxlciIsInJlcSIsInJlcyIsIm1ldGhvZCIsImhhbmRsZUdldFBhcnRpY2lwYW50cyIsInNlc3Npb24iLCJzdGF0dXMiLCJqc29uIiwibWVzc2FnZSIsImhhbmRsZUpvaW5FdmVudCIsImhhbmRsZUxlYXZlRXZlbnQiLCJlcnJvciIsImNvbnNvbGUiLCJldmVudElkIiwicXVlcnkiLCJBcnJheSIsImlzQXJyYXkiLCJwYXJ0aWNpcGFudHMiLCJzZWxlY3RGcm9tIiwiaW5uZXJKb2luIiwic2VsZWN0Iiwid2hlcmUiLCJOdW1iZXIiLCJleGVjdXRlIiwiYm9keSIsInVzZXJFbWFpbCIsInVzZXIiLCJlbWFpbCIsImxvZyIsImFjY291bnRzIiwidXNlckFjY291bnQiLCJmaW5kIiwiYWNjb3VudCIsInVzZXJuYW1lIiwidXNlck5hbWUiLCJuYW1lIiwibmV3QWNjb3VudCIsImluc2VydEludG8iLCJ2YWx1ZXMiLCJwYXNzd29yZCIsImZpcnN0TmFtZSIsInNwbGl0IiwibGFzdE5hbWUiLCJyZXR1cm5pbmciLCJleGVjdXRlVGFrZUZpcnN0IiwidXNlcklkIiwiaWQiLCJleGlzdGluZ1BhcnRpY2lwYW50IiwibGVuZ3RoIiwicGFydGljaXBhbnQiLCJqb2luZWRBdCIsIkRhdGUiLCJpbnNlcnRFcnJvciIsInN0YWNrIiwicmVzdWx0IiwiZGVsZXRlRnJvbSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./pages/api/participants.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fparticipants&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cparticipants.ts&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();