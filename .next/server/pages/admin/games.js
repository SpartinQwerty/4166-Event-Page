(()=>{var e={};e.id=560,e.ids=[560,888,660],e.modules={6339:(e,t,r)=>{"use strict";r.a(e,async(e,s)=>{try{r.r(t),r.d(t,{config:()=>p,default:()=>u,getServerSideProps:()=>m,getStaticPaths:()=>g,getStaticProps:()=>x,reportWebVitals:()=>f,routeModule:()=>w,unstable_getServerProps:()=>v,unstable_getServerSideProps:()=>S,unstable_getStaticParams:()=>b,unstable_getStaticPaths:()=>y,unstable_getStaticProps:()=>j});var a=r(7093),i=r(5244),n=r(1323),o=r(2899),l=r.n(o),c=r(6814),d=r(6347),h=e([c,d]);[c,d]=h.then?(await h)():h;let u=(0,n.l)(d,"default"),x=(0,n.l)(d,"getStaticProps"),g=(0,n.l)(d,"getStaticPaths"),m=(0,n.l)(d,"getServerSideProps"),p=(0,n.l)(d,"config"),f=(0,n.l)(d,"reportWebVitals"),j=(0,n.l)(d,"unstable_getStaticProps"),y=(0,n.l)(d,"unstable_getStaticPaths"),b=(0,n.l)(d,"unstable_getStaticParams"),v=(0,n.l)(d,"unstable_getServerProps"),S=(0,n.l)(d,"unstable_getServerSideProps"),w=new a.PagesRouteModule({definition:{kind:i.x.PAGES,page:"/admin/games",pathname:"/admin/games",bundlePath:"",filename:""},components:{App:c.default,Document:l()},userland:d});s()}catch(e){s(e)}})},862:(e,t,r)=>{"use strict";r.a(e,async(e,s)=>{try{r.d(t,{Z:()=>x});var a=r(997),i=r(2210),n=r(6134),o=r(1664),l=r.n(o),c=r(1649),d=r(6689),h=r(8726),u=e([i,n]);function x({children:e}){let{data:t}=(0,c.useSession)(),{isAdmin:r}=(0,h.A)(),[s,o]=(0,d.useState)("");console.log("Session data:",t),console.log("Is admin:",r);let u=e=>{e.preventDefault(),console.log("Searching for:",s)};return(0,a.jsxs)(i.Box,{children:[a.jsx(i.Box,{as:"nav",bg:"primary.600",py:2,position:"sticky",top:0,zIndex:1e3,children:a.jsx(i.Container,{maxW:"container.xl",children:(0,a.jsxs)(i.Flex,{align:"center",gap:4,children:[a.jsx(i.Link,{as:"a",href:"/",fontSize:"xl",fontWeight:"bold",color:"white",_hover:{textDecoration:"none",color:"primary.100"},children:"EventHub"}),a.jsx(i.Flex,{flex:1,mx:4,children:a.jsx("form",{onSubmit:u,style:{width:"100%"},children:(0,a.jsxs)(i.InputGroup,{size:"md",children:[a.jsx(i.Input,{bg:"white",placeholder:"Search events...",value:s,onChange:e=>o(e.target.value),borderRadius:"md",height:"40px",_focus:{borderColor:"secondary.300",boxShadow:"0 0 0 1px var(--chakra-colors-secondary-300)"}}),a.jsx(i.InputRightElement,{h:"100%",children:a.jsx(i.Button,{height:"100%",w:"100%",onClick:u,bg:"secondary.500",color:"white",_hover:{bg:"secondary.600"},borderLeftRadius:"0",borderRightRadius:"md",children:a.jsx(n.SearchIcon,{})})})]})})}),a.jsx(i.Flex,{gap:4,align:"center",children:t?(0,a.jsxs)(a.Fragment,{children:[a.jsx(i.Link,{as:"a",href:"/events/create",color:"white",_hover:{color:"secondary.200"},children:"Create Event"}),r&&a.jsx(i.Button,{as:"a",href:"/admin",colorScheme:"red",size:"sm",leftIcon:a.jsx(i.Icon,{as:n.StarIcon}),_hover:{bg:"red.600"},children:"Admin"}),(0,a.jsxs)(i.Menu,{children:[a.jsx(i.MenuButton,{as:i.Button,variant:"ghost",color:"white",_hover:{bg:"primary.700"},_active:{bg:"primary.700"},children:"Account"}),(0,a.jsxs)(i.MenuList,{children:[a.jsx(i.MenuItem,{as:"a",href:"/profile",children:"Profile"}),a.jsx(i.MenuItem,{as:"a",href:"/favorites",children:"My Favorites"}),a.jsx(i.MenuItem,{onClick:()=>{(0,c.signOut)({callbackUrl:"/",redirect:!0})},children:"Sign Out"})]})]})]}):(0,a.jsxs)(a.Fragment,{children:[a.jsx(i.Link,{as:"a",href:"/auth/signin",color:"white",_hover:{color:"secondary.200"},children:"Sign In"}),a.jsx(i.Button,{as:"a",href:"/auth/signup",colorScheme:"secondary",size:"sm",_hover:{bg:"secondary.600"},children:"Sign Up"})]})})]})})}),a.jsx(i.Box,{bg:"primary.700",py:2,children:a.jsx(i.Container,{maxW:"container.xl",children:(0,a.jsxs)(i.Flex,{gap:6,children:[a.jsx(l(),{href:"/events",legacyBehavior:!0,children:(0,a.jsxs)(i.Link,{color:"white",_hover:{color:"secondary.200"},display:"flex",alignItems:"center",gap:2,children:[a.jsx(n.CalendarIcon,{}),"All Events"]})}),a.jsx(l(),{href:"/events/today",legacyBehavior:!0,children:(0,a.jsxs)(i.Link,{color:"white",_hover:{color:"secondary.200"},display:"flex",alignItems:"center",gap:2,children:[a.jsx(n.TimeIcon,{}),"Today's Events"]})}),a.jsx(l(),{href:"/events/popular",legacyBehavior:!0,children:(0,a.jsxs)(i.Link,{color:"white",_hover:{color:"secondary.200"},display:"flex",alignItems:"center",gap:2,children:[a.jsx(n.StarIcon,{}),"Popular"]})}),a.jsx(l(),{href:"/favorites",legacyBehavior:!0,children:(0,a.jsxs)(i.Link,{color:"white",_hover:{color:"secondary.200"},display:"flex",alignItems:"center",gap:2,children:[a.jsx(n.StarIcon,{}),"Favorites"]})}),a.jsx(l(),{href:"/events/nearby",legacyBehavior:!0,children:(0,a.jsxs)(i.Link,{color:"white",_hover:{color:"secondary.200"},display:"flex",alignItems:"center",gap:2,children:[a.jsx(n.TimeIcon,{}),"Near Me"]})})]})})}),a.jsx(i.Box,{as:"main",children:e})]})}[i,n]=u.then?(await u)():u,s()}catch(e){s(e)}})},8726:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var s=r(1649),a=r(6689);function i(){let{data:e,status:t}=(0,s.useSession)(),[r,i]=(0,a.useState)(!1);return{isAdmin:r,isLoading:"loading"===t,isAuthenticated:"authenticated"===t}}},6814:(e,t,r)=>{"use strict";r.a(e,async(e,s)=>{try{r.r(t),r.d(t,{default:()=>d});var a=r(997),i=r(2210),n=r(1649),o=r(862),l=r(8981);r(6764);var c=e([i,o,l]);function d({Component:e,pageProps:{session:t,...r}}){return a.jsx(n.SessionProvider,{session:t,children:a.jsx(i.ChakraProvider,{theme:l.Z,children:a.jsx(o.Z,{children:a.jsx(e,{...r})})})})}[i,o,l]=c.then?(await c)():c,s()}catch(e){s(e)}})},6347:(e,t,r)=>{"use strict";r.a(e,async(e,s)=>{try{r.r(t),r.d(t,{default:()=>h,getServerSideProps:()=>u});var a=r(997),i=r(2210),n=r(1649),o=r(1163),l=r(8726),c=r(6689),d=e([i]);function h({initialGames:e}){let[t,r]=(0,c.useState)(e),[s,d]=(0,c.useState)(!1),[h,u]=(0,c.useState)({}),[x,g]=(0,c.useState)(!1),{isOpen:m,onOpen:p,onClose:f}=(0,i.useDisclosure)(),j=(0,i.useToast)(),y=(0,o.useRouter)(),{data:b,status:v}=(0,n.useSession)({required:!0,onUnauthenticated(){y.push("/auth/signin")}}),{isAdmin:S,isLoading:w}=(0,l.A)();console.log("Games admin page - Session:",b),console.log("Games admin page - isAdmin:",S),console.log("Initial games data:",e);let C=async()=>{try{let e=await fetch("/api/games");if(!e.ok)throw Error("Failed to fetch games");let t=await e.json(),s=Array.isArray(t)?t:t.games||[];console.log("Refreshed games data:",s),r(s)}catch(e){console.error("Error fetching games:",e),j({title:"Error",description:"Failed to load games",status:"error",duration:3e3,isClosable:!0})}},T=e=>{e?(u(e),g(!0)):(u({}),g(!1)),p()},P=async()=>{if(!h.title){j({title:"Error",description:"Game title is required",status:"error",duration:3e3,isClosable:!0});return}d(!0);try{let e=x?`/api/games/${h.id}`:"/api/games",t=await fetch(e,{method:x?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(h)});if(!t.ok){let e=await t.json();throw Error(e.message||"Failed to save game")}await C(),f(),j({title:"Success",description:x?"Game updated successfully":"Game created successfully",status:"success",duration:3e3,isClosable:!0})}catch(e){j({title:"Error",description:e.message,status:"error",duration:3e3,isClosable:!0})}finally{d(!1)}},k=async e=>{if(confirm("Are you sure you want to delete this game? This action cannot be undone."))try{let t=await fetch(`/api/games/${e}`,{method:"DELETE"});if(!t.ok){let e=await t.json();throw Error(e.message||"Failed to delete game")}await C(),j({title:"Success",description:"Game deleted successfully",status:"success",duration:3e3,isClosable:!0})}catch(e){j({title:"Error",description:e.message,status:"error",duration:3e3,isClosable:!0})}};return"loading"===v||w?a.jsx(i.Container,{maxW:"container.xl",py:8,children:(0,a.jsxs)(i.Box,{className:"bg-white rounded-lg shadow-md p-8 mb-8",textAlign:"center",children:[a.jsx(i.Heading,{as:"h2",size:"lg",mb:4,children:"Loading..."}),a.jsx(i.Text,{children:"Please wait while we load the games management page."})]})}):S?(0,a.jsxs)(i.Container,{maxW:"container.xl",py:8,children:[(0,a.jsxs)(i.Box,{className:"bg-white rounded-lg shadow-md p-8 mb-8",children:[(0,a.jsxs)(i.Flex,{justifyContent:"space-between",alignItems:"center",mb:6,children:[a.jsx(i.Heading,{as:"h1",size:"xl",className:"text-primary-700",children:"Games Management"}),a.jsx(i.Button,{colorScheme:"primary",onClick:()=>T(),children:"Add New Game"})]}),0===t.length?a.jsx(i.Text,{className:"text-gray-600 text-center py-8",children:"No games found. Create your first game to get started."}):(0,a.jsxs)(i.Table,{variant:"simple",children:[a.jsx(i.Thead,{children:(0,a.jsxs)(i.Tr,{children:[a.jsx(i.Th,{children:"ID"}),a.jsx(i.Th,{children:"Title"}),a.jsx(i.Th,{children:"Description"}),a.jsx(i.Th,{children:"Actions"})]})}),a.jsx(i.Tbody,{children:t.map(e=>(0,a.jsxs)(i.Tr,{children:[a.jsx(i.Td,{children:e.id}),a.jsx(i.Td,{children:e.title}),a.jsx(i.Td,{children:e.description}),a.jsx(i.Td,{children:(0,a.jsxs)(i.Flex,{gap:2,children:[a.jsx(i.Button,{size:"sm",colorScheme:"blue",onClick:()=>T(e),children:"Edit"}),a.jsx(i.Button,{size:"sm",colorScheme:"red",onClick:()=>k(e.id),children:"Delete"})]})})]},e.id))})]})]}),(0,a.jsxs)(i.Modal,{isOpen:m,onClose:f,children:[a.jsx(i.ModalOverlay,{}),(0,a.jsxs)(i.ModalContent,{children:[a.jsx(i.ModalHeader,{children:x?"Edit Game":"Create New Game"}),a.jsx(i.ModalCloseButton,{}),(0,a.jsxs)(i.ModalBody,{children:[(0,a.jsxs)(i.FormControl,{isRequired:!0,mb:4,children:[a.jsx(i.FormLabel,{children:"Title"}),a.jsx(i.Input,{value:h.title||"",onChange:e=>u({...h,title:e.target.value}),placeholder:"Enter game title"})]}),(0,a.jsxs)(i.FormControl,{mb:4,children:[a.jsx(i.FormLabel,{children:"Description"}),a.jsx(i.Textarea,{value:h.description||"",onChange:e=>u({...h,description:e.target.value}),placeholder:"Enter game description",rows:4})]})]}),(0,a.jsxs)(i.ModalFooter,{children:[a.jsx(i.Button,{variant:"outline",mr:3,onClick:f,children:"Cancel"}),a.jsx(i.Button,{colorScheme:"primary",onClick:P,isLoading:s,children:x?"Update":"Create"})]})]})]})]}):a.jsx(i.Container,{maxW:"container.xl",py:8,children:(0,a.jsxs)(i.Box,{className:"bg-white rounded-lg shadow-md p-8 mb-8",textAlign:"center",children:[a.jsx(i.Heading,{as:"h2",size:"lg",mb:4,children:"Access Denied"}),a.jsx(i.Text,{mb:4,children:"You do not have admin privileges to access this page."}),a.jsx(i.Button,{colorScheme:"blue",onClick:()=>y.push("/"),children:"Go to Homepage"})]})})}i=(d.then?(await d)():d)[0];let u=async e=>{if(!await (0,n.getSession)(e))return{redirect:{destination:"/auth/signin",permanent:!1}};try{let e=process.env.NEXTAUTH_URL||"http://localhost:3001";console.log("Fetching games from:",`${e}/api/games`);let t=await fetch(`${e}/api/games`),r=await t.json();return{props:{initialGames:Array.isArray(r)?r:r.games||[]}}}catch(e){return console.error("Error fetching games:",e),{props:{initialGames:[]}}}};s()}catch(e){s(e)}})},8981:(e,t,r)=>{"use strict";r.a(e,async(e,s)=>{try{r.d(t,{Z:()=>n});var a=r(2210),i=e([a]);a=(i.then?(await i)():i)[0];let n=(0,a.extendTheme)({styles:{global:{body:{bg:"#f8fafc"}}},components:{Button:{defaultProps:{colorScheme:"primary"}}},colors:{primary:{50:"#f0f9ff",100:"#e0f2fe",200:"#bae6fd",300:"#7dd3fc",400:"#38bdf8",500:"#0ea5e9",600:"#0284c7",700:"#0369a1",800:"#075985",900:"#0c4a6e"},secondary:{50:"#f0fdfa",100:"#ccfbf1",200:"#99f6e4",300:"#5eead4",400:"#2dd4bf",500:"#14b8a6",600:"#0d9488",700:"#0f766e",800:"#115e59",900:"#134e4a"},accent:{50:"#fdf4ff",100:"#fae8ff",200:"#f5d0fe",300:"#f0abfc",400:"#e879f9",500:"#d946ef",600:"#c026d3",700:"#a21caf",800:"#86198f",900:"#701a75"}},config:{initialColorMode:"light",useSystemColorMode:!1}});s()}catch(e){s(e)}})},6764:()=>{},1649:e=>{"use strict";e.exports=require("next-auth/react")},2785:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},6689:e=>{"use strict";e.exports=require("react")},6405:e=>{"use strict";e.exports=require("react-dom")},997:e=>{"use strict";e.exports=require("react/jsx-runtime")},2048:e=>{"use strict";e.exports=require("fs")},5315:e=>{"use strict";e.exports=require("path")},6162:e=>{"use strict";e.exports=require("stream")},1568:e=>{"use strict";e.exports=require("zlib")},6134:e=>{"use strict";e.exports=import("@chakra-ui/icons")},2210:e=>{"use strict";e.exports=import("@chakra-ui/react")}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[117,899,664,342],()=>r(6339));module.exports=s})();